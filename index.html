<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bombkeeper - ç²¾å“åœ¨çº¿æ¸¸æˆå¹³å°</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3018746921944935"
     crossorigin="anonymous"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: white; /* Solid white background */
            color: #333;
            overflow-x: hidden;
        }

        /* å¯¼èˆªæ  */
        .navbar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding: 1rem 0;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .nav-container {
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-left-group {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: #333; /* Use solid color for logo on light background */
            cursor: pointer;
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-item {
            position: relative;
        }

        .nav-link {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-link:hover {
            background: #f0f0f0; /* Subtle grey on hover */
            color: #333; /* Keep text dark */
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08); /* Softer shadow */
        }

        /* è¯­è¨€åˆ‡æ¢æŒ‰é’® */
        .language-switcher {
            position: relative;
        }

        .language-btn {
            background: transparent;
            color: #333;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 25px; /* Make it a capsule shape like nav-link */
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .language-btn:hover {
            background: #f0f0f0; /* Subtle grey on hover, consistent with nav-link */
            transform: translateY(-2px); /* Match nav-link */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08); /* Match nav-link */
        }

        .language-btn .arrow {
            color: #000;
            font-size: 0.8rem;
        }

        .language-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            min-width: 120px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1001;
            margin-top: 0.5rem;
        }

        .language-dropdown.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .language-option {
            padding: 0.8rem 1rem;
            cursor: pointer;
            transition: background 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #333;
            font-size: 0.9rem;
        }

        .language-option:hover {
            background: #f5f5f5;
        }

        .language-option:first-child {
            border-radius: 10px 10px 0 0;
        }

        .language-option:last-child {
            border-radius: 0 0 10px 10px;
        }

        .language-option.active {
            background: rgba(128, 128, 128, 0.3);
            color: #333;
        }

        .language-option.active:hover {
            background: rgba(128, 128, 128, 0.4);
        }

        /* NEW: Styles for the Game Categories Dropdown in Navbar */
        .category-switcher {
            position: relative;
        }

        .category-btn {
             /* Reuse .language-btn styles */
        }

        .category-dropdown {
            position: absolute;
            top: 100%;
            left: 0; /* Align to the left */
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            min-width: 150px; /* Adjust width as needed */
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1001;
            margin-top: 0.5rem;
        }

        .category-dropdown.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .category-option {
            padding: 0.8rem 1rem;
            cursor: pointer;
            transition: background 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #333;
            font-size: 0.9rem;
        }

        .category-option:hover {
            background: #f5f5f5;
        }

        .category-option:first-child {
            border-radius: 10px 10px 0 0;
        }

        .category-option:last-child {
            border-radius: 0 0 10px 10px;
        }

        /* Adjust active style if needed, currently not used for categories */
        /*
        .category-option.active {
            background: rgba(128, 128, 128, 0.3);
            color: #333;
        }

        .category-option.active:hover {
            background: rgba(128, 128, 128, 0.4);
        }
        */

        /* NEW: Search Bar in Navbar */
        .nav-search {
            position: relative;
            display: flex;
            align-items: center;
        }

        .search-input {
            background: transparent;
            color: #333;
            border: 1px solid #ddd; /* A subtle border */
            padding: 0.5rem 2.5rem 0.5rem 1rem; /* Adjust padding for icon */
            border-radius: 25px; /* Capsule shape like nav-link */
            cursor: text;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
            width: 160px; /* Initial width */
            outline: none;
            font-family: inherit; /* Inherit font from body */
        }

        .search-input::placeholder {
            color: #888;
            font-weight: 500;
        }

        .search-input:hover {
            background: #f0f0f0; /* Subtle grey on hover, consistent with nav-link */
            transform: translateY(-2px); /* Match nav-link */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08); /* Match nav-link */
        }

        .search-input:focus {
            background: #fff;
            border-color: #aaa;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08); /* Match nav-link */
            width: 200px; /* Expand on focus */
        }

        .nav-search .search-icon {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
            pointer-events: none; /* Make icon not clickable, as input is the target */
            transition: color 0.3s ease;
        }
        
        .search-input:focus + .search-icon {
            color: #333;
        }

        /* ä¸»å†…å®¹åŒºåŸŸ */
        .main-content {
            margin-top: 80px; /* Navbar height */
            padding: 2rem;
            /* Removed Flexbox properties for sidebar layout */
            display: block; /* Use block display as default */
            max-width: 1400px; /* Optional: Add max-width for content centering */
            margin: 80px auto 0; /* Optional: Center the content area */
        }

        /* æ¬¢è¿åŒºåŸŸ */
        .hero-section {
            text-align: center;
            padding: 4rem 2rem;
            color: #333; /* Updated for light background */
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
            text-shadow: none; /* Remove text shadow on light background */
            animation: fadeInUp 1s ease-out;
        }

        .hero-subtitle {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            opacity: 0.8; /* Adjust opacity */
            animation: fadeInUp 1s ease-out 0.2s both;
        }

        /* NEW: Sidebar - Game Categories Section */
        /* REMOVED: Entire .categories-section CSS block */
        
        /* NEW: Page Content Area (right of sidebar) */
        /* REMOVED: .page-content-area CSS block */

        /* Ensure hero section takes full width of its new container */
        #hero-content-area { /* Formerly .hero-section, ID added for JS */
             width: 100%;
        }

        /* æ¸¸æˆå†…å®¹åŒºåŸŸ */
        .game-content { /* This is #game-display-area */
            display: none; /* Hidden by default, shown by JS */
            padding: 0; /* Padding will be handled by its children or specific content */
            /* max-width: 1200px; Remove - now constrained by .page-content-area */
            /* margin: 0 auto; Remove */
            width: 100%; /* Takes full width of .page-content-area */
        }

        .game-content.active {
            display: block;
        }

        .content-header {
            background: #f5f5f5; /* Light grey background for header */
            backdrop-filter: none; /* Remove blur on solid background */
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid #e0e0e0; /* Add a light border */
        }

        .content-title {
            color: #333; /* Dark text color */
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .back-button {
            background: transparent;
            color: #333; /* Standard text color, consistent with nav-link */
            border: none; /* Remove border to match nav-link style */
            padding: 0.7rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
            margin-bottom: 1rem;
            margin-left: -1.5rem; /* Negative margin to align text with content edge */
        }

        .back-button:hover {
            background: #f0f0f0; /* Subtle grey on hover */
            color: #333; /* Dark text on hover */
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08); /* Softer shadow */
        }

        /* æ¸¸æˆiframeå®¹å™¨ */
        .game-iframe-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            overflow: hidden; /* é˜²æ­¢å†…å®¹æº¢å‡º */
        }

        .game-iframe {
            width: 100%;
            height: 600px;
            border: none;
            border-radius: 10px;
            background: #000; /* æ”¹ä¸ºé»‘è‰²èƒŒæ™¯ï¼Œå‡å°‘ç™½è¾¹è§†è§‰æ•ˆæœ */
            display: block; /* æ¶ˆé™¤å†…è”å…ƒç´ é—´éš™ */
        }

        /* ç‰¹å®šæ¸¸æˆçš„æ ·å¼è°ƒæ•´ */
        .boxing-game-container {
            background: #000;
            margin: 0 auto;
            padding: 0;
            max-width: 960px;
            height: 630px;
            overflow: hidden;
        }
        
        .boxing-game-frame {
            width: 100%;
            height: 100%;
            border: none;
            margin: 0;
            padding: 0;
        }

        /* å¡”é˜²æ¸¸æˆæ ·å¼ */
        .td-game-container {
            background: #000;
            margin: 0 auto;
            padding: 0;
            max-width: 960px;
            height: 600px;
            overflow: hidden;
        }
        
        .td-game-frame {
            width: 100%;
            height: 100%;
            border: none;
            margin: 0;
            padding: 0;
        }

        /* æ‰«é›·æ¸¸æˆæ ·å¼ */
        .minesweeper-game-container {
            background: #f0f0f0;
            margin: 0 auto;
            padding: 0;
            max-width: 800px;
            height: 600px;
            overflow: hidden;
            border-radius: 10px;
        }
        
        .minesweeper-game-frame {
            width: 100%;
            height: 100%;
            border: none;
            margin: 0;
            padding: 0;
        }

        /* æ‹³çš‡æ¸¸æˆæ ·å¼ */
        .kof-game-container {
            background: #000;
            margin: 0 auto;
            padding: 0;
            max-width: 1024px;
            height: 753px;
            overflow: hidden;
        }
        
        .kof-game-frame {
            width: 100%;
            height: 100%;
            border: none;
            margin: 0;
            padding: 0;
        }

        /* é›ªäººå…„å¼Ÿæ¸¸æˆæ ·å¼ */
        .snowbros-game-container {
            background: #000;
            margin: 0 auto;
            padding: 0;
            max-width: 800px;
            height: 600px;
            overflow: hidden;
        }
        
        .snowbros-game-frame {
            width: 100%;
            height: 100%;
            border: none;
            margin: 0;
            padding: 0;
        }

        /* åƒµå°¸æ¸¸æˆæ ·å¼ */
        .zombie-game-container {
            background: #000;
            margin: 0 auto;
            padding: 0;
            max-width: 900px;
            height: 656px;
            overflow: hidden;
        }
        
        .zombie-game-frame {
            width: 100%;
            height: 100%;
            border: none;
            margin: 0;
            padding: 0;
        }

        /* ç»´äº¬æ¸¸æˆæ ·å¼ */
        .viking-game-container {
            background: #000;
            margin: 0 auto;
            padding: 0;
            max-width: 960px;
            height: 630px;
            overflow: hidden;
        }
        
        .viking-game-frame {
            width: 100%;
            height: 100%;
            border: none;
            margin: 0;
            padding: 0;
        }

        /* æ¸¸æˆåˆ—è¡¨ */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .game-card {
            background: #ffffff; /* Solid white background */
            backdrop-filter: none; /* No blur needed */
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid #e0e0e0; /* Light grey border */
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); /* Softer shadow */
        }

        .game-card:hover {
            transform: translateY(-5px);
            background: #ffffff;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1); /* Slightly stronger shadow on hover */
        }

        .game-card h3 {
            color: #333; /* Dark text */
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .game-card p {
            color: #666; /* Grey text for description */
            font-size: 0.9rem;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .nav-menu {
                display: none;
            }
            
            .nav-right {
                gap: 1rem;
            }

            /* Responsive adjustments for main content and sidebar */
            .main-content {
                flex-direction: column; /* Stack sidebar and content */
                align-items: stretch; /* Stretch items to full width */
                padding: 1rem; /* Adjust padding */
            }

            .categories-section {
                width: 100%; /* Sidebar takes full width */
                margin-bottom: 1.5rem; /* Space below sidebar when stacked */
            }

            /* Optional: adjust category card layout in sidebar for small screens */
            .categories-section .category-card {
                /* flex-direction: column; */ /* Uncomment to stack icon/text vertically */
                /* align-items: flex-start; */
            }
            
            .page-content-area {
                width: 100%;
            }
            
            .hero-title {
                font-size: 2.5rem;
            }
            
            .game-iframe {
                height: 400px;
            }
        }

        /* åŠ¨ç”» */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeInUp 0.8s ease-out;
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-left-group">
                <div class="logo" data-lang-key="logo" onclick="showHome()">ğŸ® bombkeeper</div>
                <!-- NEW: Game Categories Dropdown -->
                <div class="language-switcher category-switcher"> <!-- Reusing language-switcher classes for styling similarity -->
                    <button class="language-btn category-btn" onclick="toggleCategoryDropdown()">
                        <span id="current-category" data-lang-key="categories-title">ğŸ¯ æ¸¸æˆåˆ†ç±»</span> <!-- Using categories-title for default text -->
                        <span class="arrow">â–¼</span>
                    </button>
                    <div class="language-dropdown category-dropdown" id="category-dropdown">
                        <!-- Category options will be dynamically generated by JavaScript -->
                    </div>
                </div>
                <!-- END NEW: Game Categories Dropdown -->
            </div>
            <div class="nav-right">
                <div class="nav-search">
                    <input type="search" id="gameSearchInput" class="search-input" placeholder="æœç´¢æ¸¸æˆ..." data-lang-key="search_placeholder">
                    <span class="search-icon">ğŸ”</span>
                </div>
                <div class="language-switcher">
                    <button class="language-btn" onclick="toggleLanguageDropdown()">
                        <span id="current-language">ä¸­æ–‡</span>
                        <span class="arrow">â–¼</span>
                    </button>
                    <div class="language-dropdown" id="language-dropdown">
                        <div class="language-option active" onclick="changeLanguage('zh-CN')">
                            <span>ğŸ‡¨ğŸ‡³</span>
                            <span>ä¸­æ–‡</span>
                        </div>
                        <div class="language-option" onclick="changeLanguage('en-US')">
                            <span>ğŸ‡ºğŸ‡¸</span>
                            <span>English</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- ä¸»å†…å®¹ -->
    <main class="main-content">
        <!-- å·¦ä¾§æ¸¸æˆåˆ†ç±» (åŸ categories-section) -->
        <!-- REMOVED: Original <aside class="categories-section"> block -->

        <!-- å³ä¾§ä¸»å†…å®¹åŒºåŸŸ -->
        <div class="page-content-area"> <!-- Keeping this container, but it will now take full width -->
            <!-- æ¬¢è¿åŒºåŸŸ -->
            <section id="hero-content-area" class="hero-section">
                <h1 class="hero-title" data-lang-key="hero-title">æ¬¢è¿æ¥åˆ°bombkeeper</h1>
                <p class="hero-subtitle" data-lang-key="hero-subtitle">æ¢ç´¢ç²¾å½©çº·å‘ˆçš„åœ¨çº¿æ¸¸æˆä¸–ç•Œï¼Œäº«å—æ— é™ä¹è¶£ï¼</p>
            </section>

            <!-- æ¸¸æˆå†…å®¹é¡µé¢ -->
            <div id="game-display-area" class="game-content"> <!-- ID changed from game-content to game-display-area -->
                <button class="back-button" onclick="showHome()" data-lang-key="back-button">è¿”å›é¦–é¡µ</button>
                <div class="content-header">
                    <h2 class="content-title" id="category-title">æ¸¸æˆåˆ†ç±»</h2>
                    <p id="category-description" data-lang-key="select-game">é€‰æ‹©æ‚¨å–œæ¬¢çš„æ¸¸æˆå¼€å§‹æ¸¸ç©</p>
                </div>
                
                <!-- æ¸¸æˆåˆ—è¡¨ -->
                <div class="games-grid" id="games-list">
                    <!-- æ¸¸æˆå¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <!-- iframeå®¹å™¨ -->
                <div class="game-iframe-container" id="iframe-container" style="display: none;">
                    <iframe id="game-iframe" class="game-iframe" src="" scrolling="no"></iframe>
                </div>
            </div>
        </div>
    </main>

    <script>
        // å¤šè¯­è¨€æ–‡æœ¬æ•°æ®
        const translations = {
            'zh-CN': {
                'logo': 'ğŸ® bombkeeper',
                'nav-action': 'åŠ¨ä½œæ¸¸æˆ',
                'nav-puzzle': 'ç›Šæ™ºæ¸¸æˆ',
                'nav-strategy': 'ç­–ç•¥æ¸¸æˆ',
                'nav-casual': 'ä¼‘é—²æ¸¸æˆ',
                'nav-rpg': 'è§’è‰²æ‰®æ¼”',
                'nav-adventure': 'æ¢é™©æ¸¸æˆ',
                'hero-title': 'æ¬¢è¿æ¥åˆ°bombkeeper',
                'hero-subtitle': 'æ¢ç´¢ç²¾å½©çº·å‘ˆçš„åœ¨çº¿æ¸¸æˆä¸–ç•Œï¼Œäº«å—æ— é™ä¹è¶£ï¼',
                'categories-title': 'ğŸ¯ æ¸¸æˆåˆ†ç±»',
                'action-title': 'åŠ¨ä½œæ¸¸æˆ',
                'action-desc': 'åˆºæ¿€çš„æˆ˜æ–—ä¸å†’é™©ç­‰ä½ æ¥æŒ‘æˆ˜',
                'puzzle-title': 'ç›Šæ™ºæ¸¸æˆ',
                'puzzle-desc': 'é”»ç‚¼å¤§è„‘ï¼ŒæŒ‘æˆ˜æ™ºåŠ›æé™',
                'strategy-title': 'ç­–ç•¥æ¸¸æˆ',
                'strategy-desc': 'è¿ç­¹å¸·å¹„ï¼Œå†³èƒœåƒé‡Œ',
                'casual-title': 'ä¼‘é—²æ¸¸æˆ',
                'casual-desc': 'è½»æ¾å¨±ä¹ï¼Œæ”¾æ¾èº«å¿ƒ',
                'rpg-title': 'è§’è‰²æ‰®æ¼”',
                'rpg-desc': 'æ²‰æµ¸å¼ä½“éªŒï¼Œæˆä¸ºä¼ å¥‡è‹±é›„',
                'racing-title': 'ç«é€Ÿæ¸¸æˆ',
                'racing-desc': 'é€Ÿåº¦ä¸æ¿€æƒ…çš„å®Œç¾ç»“åˆ',
                'adventure-title': 'æ¢é™©æ¸¸æˆ',
                'adventure-desc': 'è¸ä¸ŠæœªçŸ¥çš„æ—…ç¨‹ï¼Œæ¢ç´¢å¥‡å¦™çš„ä¸–ç•Œ',
                'back-button': 'è¿”å›é¦–é¡µ',
                'select-game': 'é€‰æ‹©æ‚¨å–œæ¬¢çš„æ¸¸æˆå¼€å§‹æ¸¸ç©',
                'search_placeholder': 'æœç´¢æ¸¸æˆ...',
                'search_results_title': 'æœç´¢ç»“æœ',
                'no_games_found': 'æœªæ‰¾åˆ°ç›¸å…³æ¸¸æˆ'
            },
            'en-US': {
                'logo': 'ğŸ® bombkeeper',
                'nav-action': 'Action',
                'nav-puzzle': 'Puzzle',
                'nav-strategy': 'Strategy',
                'nav-casual': 'Casual',
                'nav-rpg': 'RPG',
                'nav-adventure': 'Adventure',
                'hero-title': 'Welcome to bombkeeper',
                'hero-subtitle': 'Explore the wonderful world of online games and enjoy unlimited fun!',
                'categories-title': 'ğŸ¯ Game Categories',
                'action-title': 'Action Games',
                'action-desc': 'Exciting battles and adventures await your challenge',
                'puzzle-title': 'Puzzle Games',
                'puzzle-desc': 'Exercise your brain and challenge your intelligence',
                'strategy-title': 'Strategy Games',
                'strategy-desc': 'Plan strategies and win battles',
                'casual-title': 'Casual Games',
                'casual-desc': 'Relax and enjoy entertainment',
                'rpg-title': 'Role Playing',
                'rpg-desc': 'Immersive experience, become a legendary hero',
                'racing-title': 'Racing Games',
                'racing-desc': 'Perfect combination of speed and passion',
                'adventure-title': 'Adventure Games',
                'adventure-desc': 'Embark on unknown journeys and explore fantastic worlds',
                'back-button': 'Back to Home',
                'select-game': 'Choose your favorite game to start playing',
                'search_placeholder': 'Search for games...',
                'search_results_title': 'Search Results',
                'no_games_found': 'No matching games found'
            }
        };

        // å½“å‰è¯­è¨€
        let currentLanguage = 'zh-CN';
        let searchTimeout;

        // æ¸¸æˆæ•°æ®
        const gameData = {
            action: {
                title: {
                    'zh-CN': "âš”ï¸ åŠ¨ä½œæ¸¸æˆ",
                    'en-US': "âš”ï¸ Action Games"
                },
                description: {
                    'zh-CN': "ä½“éªŒåˆºæ¿€çš„æˆ˜æ–—ä¸å†’é™©",
                    'en-US': "Experience exciting battles and adventures"
                },
                games: [
                    { 
                        name: { 'zh-CN': "Dead Zed", 'en-US': "Dead Zed" }, 
                        desc: { 'zh-CN': "åˆºæ¿€çš„åŠ¨ä½œå†’é™©", 'en-US': "Exciting action adventure" }, 
                        url: "https://storage.y8.com/y8-studio/html5/zoki/a646a84dc850/?key=y8&value=default" 
                    },
                    { 
                        name: { 'zh-CN': "Punch Boxing Championship", 'en-US': "Punch Boxing Championship" }, 
                        desc: { 'zh-CN': "åˆºæ¿€çš„æ‹³å‡»å† å†›èµ›æ¸¸æˆ", 'en-US': "Exciting boxing championship game" }, 
                        url: "https://storage.y8.com/y8-studio/unity/akeemywka/punch_boxing_championship/?key=y8&value=default" 
                    },
                    { 
                        name: { 'zh-CN': "é—ªç¿¼æ‹³çš‡1.9", 'en-US': "KOF Wing 1.9" }, 
                        desc: { 'zh-CN': "ç»å…¸æ ¼æ–—å¯¹æˆ˜æ¸¸æˆ", 'en-US': "Classic fighting game" }, 
                        url: "https://en.gameslol.net/data/kof19/index.php?key=y8&value=default",
                        specialStyle: "kof-game" // æ·»åŠ ç‰¹æ®Šæ ·å¼æ ‡è®°
                    },
                    { 
                        name: { 'zh-CN': "Zombies vs Berserk", 'en-US': "Zombies vs Berserk" }, 
                        desc: { 'zh-CN': "æ¿€çƒˆçš„åƒµå°¸å°„å‡»æ¸¸æˆ", 'en-US': "Intense zombie shooting game" }, 
                        url: "https://storage.y8.com/y8-studio/unity/akeemywka/zombies_vs_berserk_v2/?key=y8&ratio_tolerant=true&value=default",
                        specialStyle: "zombie-game" // æ·»åŠ ç‰¹æ®Šæ ·å¼æ ‡è®°
                    }
                ]
            },
            puzzle: {
                title: {
                    'zh-CN': "ğŸ§© ç›Šæ™ºæ¸¸æˆ",
                    'en-US': "ğŸ§© Puzzle Games"
                },
                description: {
                    'zh-CN': "é”»ç‚¼å¤§è„‘ï¼ŒæŒ‘æˆ˜æ™ºåŠ›",
                    'en-US': "Exercise your brain and challenge your intelligence"
                },
                games: [
                    { 
                        name: { 'zh-CN': "æ‰«é›·", 'en-US': "Minesweeper" }, 
                        desc: { 'zh-CN': "ç»å…¸çš„é€»è¾‘æ¨ç†æ¸¸æˆ", 'en-US': "Classic logic puzzle game" }, 
                        url: "https://ohminesweeper.online/",
                        specialStyle: "minesweeper-game" // æ·»åŠ ç‰¹æ®Šæ ·å¼æ ‡è®°
                    }
                ]
            },
            strategy: { // Ensuring strategy category exists, even if empty for now
                title: {
                    'zh-CN': "ğŸ° ç­–ç•¥æ¸¸æˆ",
                    'en-US': "ğŸ° Strategy Games"
                },
                description: {
                    'zh-CN': "è¿ç­¹å¸·å¹„ï¼Œåˆ¶å®šæˆ˜ç•¥",
                    'en-US': "Plan strategies and make tactical decisions"
                },
                games: [
                    { 
                        name: { 'zh-CN': "Tower Defense: Monster Mash", 'en-US': "Tower Defense: Monster Mash" }, 
                        desc: { 'zh-CN': "ç»å…¸å¡”é˜²æ¸¸æˆï¼ŒæŠµå¾¡æ€ªç‰©å…¥ä¾µ", 'en-US': "Classic tower defense game, defend against monster invasion" }, 
                        url: "https://www.spiele-umsonst.de/azad/downloads/unitywebgl/tdmonstermash/?key=y8&value=default",
                        specialStyle: "td-game" // æ·»åŠ ç‰¹æ®Šæ ·å¼æ ‡è®°
                    }
                ]
            },
            casual: { // Adding Pac-Man to casual games
                title: {
                    'zh-CN': "ğŸˆ ä¼‘é—²æ¸¸æˆ",
                    'en-US': "ğŸˆ Casual Games"
                },
                description: {
                    'zh-CN': "è½»æ¾å¨±ä¹ï¼Œæ”¾æ¾å¿ƒæƒ…",
                    'en-US': "Relax and enjoy entertainment"
                },
                games: []
            },
            rpg: { // Ensuring rpg category exists
                title: {
                    'zh-CN': "ğŸ—¡ï¸ è§’è‰²æ‰®æ¼”",
                    'en-US': "ğŸ—¡ï¸ Role Playing"
                },
                description: {
                    'zh-CN': "æ‰®æ¼”è§’è‰²ï¼Œä½“éªŒå†’é™©",
                    'en-US': "Play roles and experience adventures"
                },
                games: [
                    { 
                        name: { 'zh-CN': "Vikings", 'en-US': "Vikings" }, 
                        desc: { 'zh-CN': "æ‰®æ¼”ç»´äº¬æˆ˜å£«ï¼Œå±•å¼€å†’é™©å¾ç¨‹", 'en-US': "Play as a Viking warrior on an epic adventure" }, 
                        url: "https://storage.y8.com/y8-studio/unity/akeemywka/vikings/?key=y8&value=default",
                        specialStyle: "viking-game" // æ·»åŠ ç‰¹æ®Šæ ·å¼æ ‡è®°
                    }
                ]
            },
            racing: { // Ensuring racing category exists
                title: {
                    'zh-CN': "ğŸï¸ ç«é€Ÿæ¸¸æˆ",
                    'en-US': "ğŸï¸ Racing Games"
                },
                description: {
                    'zh-CN': "é€Ÿåº¦ä¸æ¿€æƒ…çš„ä½“éªŒ",
                    'en-US': "Experience speed and passion"
                },
                games: []
            },
            adventure: { // ADDED adventure category
                title: {
                    'zh-CN': "ğŸ—ºï¸ æ¢é™©æ¸¸æˆ",
                    'en-US': "ğŸ—ºï¸ Adventure Games"
                },
                description: {
                    'zh-CN': "è¸ä¸ŠæœªçŸ¥çš„æ—…ç¨‹ï¼Œæ¢ç´¢å¥‡å¦™çš„ä¸–ç•Œ",
                    'en-US': "Embark on unknown journeys and explore fantastic worlds"
                },
                games: []
            }
        };

        // è¯­è¨€åˆ‡æ¢åŠŸèƒ½
        function toggleLanguageDropdown() {
            const dropdown = document.getElementById('language-dropdown');
            dropdown.classList.toggle('show');
            // Close category dropdown if open
            document.getElementById('category-dropdown').classList.remove('show');
        }

        // åˆ‡æ¢è¯­è¨€
        function changeLanguage(language) {
            currentLanguage = language;
            
            // æ›´æ–°å½“å‰è¯­è¨€æ˜¾ç¤º
            const currentLangSpan = document.getElementById('current-language');
            currentLangSpan.textContent = language === 'zh-CN' ? 'ä¸­æ–‡' : 'English';
            
            // æ›´æ–°è¯­è¨€é€‰é¡¹çš„æ¿€æ´»çŠ¶æ€
            const options = document.querySelectorAll('.language-option');
            options.forEach(option => {
                option.classList.remove('active');
                if ((language === 'zh-CN' && option.textContent.includes('ä¸­æ–‡')) ||
                    (language === 'en-US' && option.textContent.includes('English'))) {
                    option.classList.add('active');
                }
            });
            
            // æ›´æ–°é¡µé¢æ–‡æœ¬
            updatePageText();
            
            // éšè—ä¸‹æ‹‰èœå•
            document.getElementById('language-dropdown').classList.remove('show');
            
            // ä¿å­˜è¯­è¨€é€‰æ‹©åˆ°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('preferred-language', language);
        }

        // æ›´æ–°é¡µé¢æ–‡æœ¬
        function updatePageText() {
            const elements = document.querySelectorAll('[data-lang-key]');
            elements.forEach(element => {
                const key = element.getAttribute('data-lang-key');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    if (element.tagName === 'INPUT' && element.placeholder !== undefined) {
                        element.placeholder = translations[currentLanguage][key];
                    } else {
                        element.textContent = translations[currentLanguage][key];
                    }
                }
            });

            // Update category dropdown button text
            const currentCategorySpan = document.getElementById('current-category');
            if (currentCategorySpan) {
                 currentCategorySpan.textContent = translations[currentLanguage]['categories-title'];
            }
            
            // Regenerate category options with updated language
            generateCategoryDropdownOptions();
        }

        // NEW: æ¸¸æˆåˆ†ç±»ä¸‹æ‹‰èœå•åŠŸèƒ½
        function toggleCategoryDropdown() {
            const dropdown = document.getElementById('category-dropdown');
            dropdown.classList.toggle('show');
            // Close language dropdown if open
            document.getElementById('language-dropdown').classList.remove('show');
        }

        // NEW: Dynamically generate category dropdown options
        function generateCategoryDropdownOptions() {
            const dropdown = document.getElementById('category-dropdown');
            dropdown.innerHTML = ''; // Clear existing options

            const categories = Object.keys(gameData);
            categories.forEach(categoryKey => {
                const category = gameData[categoryKey];
                const option = document.createElement('div');
                option.className = 'language-option category-option'; // Reuse styling classes
                option.innerHTML = `
                    <span>${category.title[currentLanguage].split(' ')[0] || ''}</span> <!-- Display icon -->
                    <span>${category.title[currentLanguage].split(' ').slice(1).join(' ')}</span> <!-- Display text title -->
                `;
                // Add click handler to show category page
                option.onclick = () => showCategory(categoryKey);
                dropdown.appendChild(option);
            });
        }

        // æ˜¾ç¤ºé¦–é¡µ
        function showHome() {
            document.getElementById('hero-content-area').style.display = 'block';
            const gameDisplayArea = document.getElementById('game-display-area');
            if (gameDisplayArea) gameDisplayArea.classList.remove('active');
            
            const iframeContainer = document.getElementById('iframe-container');
            if (iframeContainer) iframeContainer.style.display = 'none';

            const gamesList = document.getElementById('games-list');
            if (gamesList) gamesList.innerHTML = ''; // Clear games list content on home
            
            // Reset content-header state for when gameDisplayArea becomes active again
            if (gameDisplayArea) {
                const contentHeader = gameDisplayArea.querySelector('.content-header');
                if (contentHeader) {
                    contentHeader.style.display = 'block'; // Default display
                }
                const categoryDescElement = document.getElementById('category-description');
                if (categoryDescElement) {
                    categoryDescElement.style.display = 'block'; // Default display
                }
                 const categoryTitleElement = document.getElementById('category-title');
                 if (categoryTitleElement) {
                     categoryTitleElement.textContent = translations[currentLanguage]['categories-title']; // Reset category title text
                 }
            }
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // æ˜¾ç¤ºæ¸¸æˆåˆ†ç±»
        function showCategory(categoryKey) { // Changed parameter name for clarity
            const data = gameData[categoryKey]; // Use categoryKey to access data
            if (!data) return;

            document.getElementById('hero-content-area').style.display = 'none';
            const gameDisplayArea = document.getElementById('game-display-area');
            if (gameDisplayArea) {
                gameDisplayArea.classList.add('active');
            }
            
            const contentHeader = gameDisplayArea.querySelector('.content-header');
            const categoryTitleElement = document.getElementById('category-title');
            const categoryDescElement = document.getElementById('category-description');

            if (contentHeader) contentHeader.style.display = 'none'; // Hide the header
            if (categoryTitleElement) categoryTitleElement.textContent = data.title[currentLanguage]; // Set category title
            if (categoryDescElement) categoryDescElement.textContent = data.description[currentLanguage]; // Set category description
            if (categoryDescElement) categoryDescElement.style.display = 'none'; // Hide description as well

            const iframeContainer = document.getElementById('iframe-container');
            if (iframeContainer) iframeContainer.style.display = 'none';
            
            const gamesList = document.getElementById('games-list');
            if (gamesList) {
                gamesList.style.display = 'grid'; // Ensure games list container is visible
                gamesList.innerHTML = ''; // Clear old games
                data.games.forEach(game => {
                    const gameCard = document.createElement('div');
                    gameCard.className = 'game-card fade-in';
                    gameCard.innerHTML = `
                        <h3>${game.name[currentLanguage]}</h3>
                        <p>${game.desc[currentLanguage]}</p>
                    `;
                    gameCard.onclick = () => loadGame(game.url, game.name[currentLanguage], false, game.specialStyle);
                    gamesList.appendChild(gameCard);
                });
            }
            
            // Close category dropdown
            document.getElementById('category-dropdown').classList.remove('show');

            window.scrollTo({ top: 80, behavior: 'smooth' }); // Scroll below navbar
        }

        function displaySearchResults(searchTerm) {
            const lowerCaseSearchTerm = searchTerm.toLowerCase();

            document.getElementById('hero-content-area').style.display = 'none';
            const gameDisplayArea = document.getElementById('game-display-area');
            if (gameDisplayArea) {
                gameDisplayArea.classList.add('active');
            }
            
            const contentHeader = gameDisplayArea.querySelector('.content-header');
            const categoryTitleElement = document.getElementById('category-title');
            const categoryDescElement = document.getElementById('category-description');

            if (contentHeader) contentHeader.style.display = 'block';
            if (categoryTitleElement) categoryTitleElement.textContent = translations[currentLanguage]['search_results_title'];
            if (categoryDescElement) {
                categoryDescElement.innerHTML = `&ldquo;${searchTerm}&rdquo;`; // Use innerHTML for quotes
                categoryDescElement.style.display = 'block';
            }

            const iframeContainer = document.getElementById('iframe-container');
            if (iframeContainer) iframeContainer.style.display = 'none';
            
            const gamesList = document.getElementById('games-list');
            if (gamesList) {
                gamesList.style.display = 'grid';
                gamesList.innerHTML = ''; // Clear old games

                let gamesFound = false;
                Object.values(gameData).forEach(category => {
                    category.games.forEach(game => {
                        const gameName = game.name[currentLanguage].toLowerCase();
                        const gameDesc = game.desc[currentLanguage].toLowerCase();

                        if (gameName.includes(lowerCaseSearchTerm) || gameDesc.includes(lowerCaseSearchTerm)) {
                            const gameCard = document.createElement('div');
                            gameCard.className = 'game-card fade-in';
                            gameCard.innerHTML = `
                                <h3>${game.name[currentLanguage]}</h3>
                                <p>${game.desc[currentLanguage]}</p>
                            `;
                            gameCard.onclick = () => loadGame(game.url, game.name[currentLanguage], false, game.specialStyle);
                            gamesList.appendChild(gameCard);
                            gamesFound = true;
                        }
                    });
                });

                if (!gamesFound) {
                    gamesList.innerHTML = `<p style="grid-column: 1 / -1; text-align: center;">${translations[currentLanguage]['no_games_found']}</p>`;
                }
            }
        }

        // åŠ è½½æ¸¸æˆ
        function loadGame(url, name, isExternal, specialStyle) {
            if (isExternal) {
                // å¦‚æœæ˜¯å¤–éƒ¨é“¾æ¥ï¼Œåœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€
                window.open(url, '_blank');
                return; // ä¸ç»§ç»­æ‰§è¡Œä¸‹é¢çš„ä»£ç 
            }
            
            const iframe = document.getElementById('game-iframe');
            const container = document.getElementById('iframe-container');
            const gamesList = document.getElementById('games-list');
            const gameDisplayArea = document.getElementById('game-display-area');
            
            if (gameDisplayArea && !gameDisplayArea.classList.contains('active')) {
                document.getElementById('hero-content-area').style.display = 'none';
                gameDisplayArea.classList.add('active');
            }

            const contentHeader = gameDisplayArea.querySelector('.content-header');
            if (contentHeader) {
                contentHeader.style.display = 'block'; // Show the header for the game title
            }

            const categoryDescElement = document.getElementById('category-description');
            if (categoryDescElement) {
                categoryDescElement.style.display = 'none'; // Hide the category description part
            }

            if (gamesList) gamesList.innerHTML = ''; // Clear the games list content
            if (container) container.style.display = 'block'; 
            
            // æ ¹æ®æ¸¸æˆç±»å‹åº”ç”¨ç‰¹æ®Šæ ·å¼
            if (specialStyle === 'td-game') {
                // å¡”é˜²æ¸¸æˆæ ·å¼
                container.className = 'game-iframe-container td-game-container';
                if (iframe) {
                    iframe.className = 'td-game-frame';
                    iframe.scrolling = 'no';
                    iframe.src = '';
                }
            } else if (specialStyle === 'minesweeper-game') {
                // æ‰«é›·æ¸¸æˆæ ·å¼
                container.className = 'game-iframe-container minesweeper-game-container';
                if (iframe) {
                    iframe.className = 'minesweeper-game-frame';
                    iframe.scrolling = 'no';
                    iframe.src = '';
                }
            } else if (specialStyle === 'kof-game') {
                // æ‹³çš‡æ¸¸æˆæ ·å¼
                container.className = 'game-iframe-container kof-game-container';
                if (iframe) {
                    iframe.className = 'kof-game-frame';
                    iframe.scrolling = 'no';
                    iframe.src = '';
                }
            } else if (specialStyle === 'snowbros-game') {
                // é›ªäººå…„å¼Ÿæ¸¸æˆæ ·å¼
                container.className = 'game-iframe-container snowbros-game-container';
                if (iframe) {
                    iframe.className = 'snowbros-game-frame';
                    iframe.scrolling = 'no';
                    iframe.src = '';
                }
            } else if (specialStyle === 'zombie-game') {
                // åƒµå°¸æ¸¸æˆæ ·å¼
                container.className = 'game-iframe-container zombie-game-container';
                if (iframe) {
                    iframe.className = 'zombie-game-frame';
                    iframe.scrolling = 'no';
                    iframe.src = '';
                }
            } else if (specialStyle === 'viking-game') {
                // ç»´äº¬æ¸¸æˆæ ·å¼
                container.className = 'game-iframe-container viking-game-container';
                if (iframe) {
                    iframe.className = 'viking-game-frame';
                    iframe.scrolling = 'no';
                    iframe.src = '';
                }
            } else if (name.includes("Boxing")) {
                // æ‹³å‡»æ¸¸æˆæ ·å¼
                container.className = 'game-iframe-container boxing-game-container';
                if (iframe) {
                    iframe.className = 'boxing-game-frame';
                    iframe.scrolling = 'no';
                    iframe.src = '';
                }
            } else {
                // é»˜è®¤æ ·å¼
                container.className = 'game-iframe-container';
                if (iframe) {
                    iframe.className = 'game-iframe';
                    iframe.scrolling = 'no';
                    iframe.src = '';
                }
            }
            
            const titleElement = document.getElementById('category-title'); 
            if (titleElement) {
                titleElement.innerHTML = `ğŸ® ${name} <span class="loading"></span>`;
            }
            
            setTimeout(() => {
                if (iframe) iframe.src = url;
                if (titleElement) titleElement.textContent = `ğŸ® ${name}`;
            }, 500);
            
            setTimeout(() => {
                if (container) {
                    container.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }, 600);
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // ä»æœ¬åœ°å­˜å‚¨æ¢å¤è¯­è¨€è®¾ç½®
            const savedLanguage = localStorage.getItem('preferred-language');
            if (savedLanguage && translations[savedLanguage]) {
                changeLanguage(savedLanguage);
            } else {
                // If no saved language, initialize with default language and update text
                updatePageText();
            }
            
            showHome();

            // Generate category options on initial load
            generateCategoryDropdownOptions();
            
            // æ·»åŠ æ»šåŠ¨æ•ˆæœ
            window.addEventListener('scroll', function() {
                const navbar = document.querySelector('.navbar');
                if (window.scrollY > 50) {
                    navbar.style.background = 'rgba(255, 255, 255, 0.98)';
                    navbar.style.boxShadow = '0 4px 20px rgba(0,0,0,0.1)';
                } else {
                    navbar.style.background = 'rgba(255, 255, 255, 0.95)';
                    navbar.style.boxShadow = 'none';
                }
            });
            
            // ç‚¹å‡»å¤–éƒ¨å…³é—­ä¸‹æ‹‰èœå•
            document.addEventListener('click', function(e) {
                const switchers = document.querySelectorAll('.language-switcher');
                const languageDropdown = document.getElementById('language-dropdown');
                const categoryDropdown = document.getElementById('category-dropdown');
                
                let clickInsideSwitcher = false;
                // Check if the click happened inside any of the switcher containers
                switchers.forEach(switcher => {
                    if (switcher.contains(e.target)) {
                        clickInsideSwitcher = true;
                    }
                });

                // If the click was outside all switchers, close both dropdowns
                if (!clickInsideSwitcher) {
                    languageDropdown.classList.remove('show');
                    categoryDropdown.classList.remove('show');
                }
            });

            // Setup search functionality
            const searchInput = document.getElementById('gameSearchInput');
            searchInput.addEventListener('input', (e) => {
                clearTimeout(searchTimeout);
                const searchTerm = e.target.value;
                searchTimeout = setTimeout(() => {
                    if (searchTerm.trim().length > 0) {
                        displaySearchResults(searchTerm.trim());
                    } else {
                        showHome();
                    }
                }, 300); // 300ms debounce
            });
        });

        // æ·»åŠ é”®ç›˜å¿«æ·é”®
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                showHome();
                // Close both dropdowns on Escape
                document.getElementById('language-dropdown').classList.remove('show');
                document.getElementById('category-dropdown').classList.remove('show');
            }
        });
    </script>
</body>
</html>